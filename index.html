<!doctype html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Future of Jobs, Plan Builder (3D UX)</title>

    <!-- React 18 -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Tailwind -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />

    <!-- Three.js -->
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

    <style>
      :root {
        --glass: rgba(255,255,255,0.72);
        --glass2: rgba(255,255,255,0.60);
        --stroke: rgba(0,0,0,0.08);
        --shadow: 0 12px 35px rgba(0,0,0,0.12);
      }

      body {
        background: radial-gradient(1200px 700px at 70% 20%, rgba(17,24,39,0.18), transparent 60%),
                    radial-gradient(900px 650px at 20% 60%, rgba(59,130,246,0.14), transparent 55%),
                    radial-gradient(800px 600px at 70% 90%, rgba(16,185,129,0.10), transparent 60%),
                    #f6f7fb;
      }

      /* 3D background canvas container */
      #bg3d {
        position: fixed;
        inset: 0;
        z-index: 0;
        pointer-events: none;
        filter: saturate(1.05) contrast(1.02);
      }

      /* soft vignette on top of 3D */
      .vignette {
        position: fixed;
        inset: 0;
        z-index: 1;
        pointer-events: none;
        background: radial-gradient(900px 600px at 50% 35%, rgba(255,255,255,0.05), rgba(246,247,251,0.85) 65%, rgba(246,247,251,0.95));
      }

      /* app content above */
      #root {
        position: relative;
        z-index: 2;
      }

      .glass {
        background: var(--glass);
        border: 1px solid var(--stroke);
        box-shadow: var(--shadow);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
      }

      .glass2 {
        background: var(--glass2);
        border: 1px solid var(--stroke);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      .lift {
        transform: translateY(0);
        transition: transform 200ms ease, box-shadow 200ms ease, background 200ms ease;
      }

      .lift:hover {
        transform: translateY(-3px);
        box-shadow: 0 18px 55px rgba(0,0,0,0.16);
      }

      .fade-in {
        animation: fadeIn 320ms ease-out both;
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(6px); }
        to { opacity: 1; transform: translateY(0); }
      }

      @media print {
        .no-print { display: none !important; }
        .print-area { padding: 0 !important; }
        body { background: white !important; }
        #bg3d, .vignette { display: none !important; }
      }
    </style>
  </head>

  <body class="min-h-screen text-gray-900">
    <div id="bg3d"></div>
    <div class="vignette"></div>
    <div id="root"></div>

    <script type="text/babel">
      const { useMemo, useState, useEffect, useRef } = React;

      /* =========================
         0) Minimal data for demo
         ========================= */
      const GLOBAL_HERO = { jobsCreatedM: 170, jobsDisplacedM: 92, netGrowthM: 78, churnPct: 22 };

      const MACROTRENDS = [
        { id: "tech", title: "×˜×›× ×•×œ×•×’×™×” ×• AI", blurb: "××•×˜×•××¦×™×”, GenAI, ×•×¢×™×‘×•×“ ××™×“×¢ ××©× ×™× ××©×™××•×ª ×•×ª×¤×§×™×“×™×.", hue: "from-indigo-600 to-blue-500", tags: ["AI", "Data", "Automation"] },
        { id: "green", title: "××¢×‘×¨ ×™×¨×•×§", blurb: "×× ×¨×’×™×” × ×§×™×™×”, ×¨×’×•×œ×¦×™×” ××§×œ×™××™×ª ×•×ª×¢×©×™×•×ª ×—×“×©×•×ª.", hue: "from-emerald-600 to-teal-500", tags: ["Climate", "Energy", "Sustainability"] },
        { id: "geoecon", title: "×’×™××•-×›×œ×›×œ×”", blurb: "×©×¨×©×¨××•×ª ××¡×¤×§×”, ×¡×™×™×‘×¨, ×©×™× ×•×™×™× ×’×œ×•×‘×œ×™×™× ×•×¨×’×•×œ×¦×™×”.", hue: "from-amber-600 to-orange-500", tags: ["Security", "Supply", "Risk"] },
        { id: "econ", title: "××™ ×•×“××•×ª ×›×œ×›×œ×™×ª", blurb: "×œ×—×¥ ×¢×œ ×¤×¨×™×•×Ÿ, ×™×•×§×¨ ××—×™×”, ×•×”×ª×™×™×¢×œ×•×ª.", hue: "from-rose-600 to-pink-500", tags: ["Productivity", "Costs", "Ops"] },
        { id: "demo", title: "×“××•×’×¨×¤×™×”", blurb: "×”×–×“×§× ×•×ª, ×’×™×“×•×œ ××•×›×œ×•×¡×™×™×”, ×©×™× ×•×™ ×¦×¨×›×™× ×•×©×™×¨×•×ª×™×.", hue: "from-fuchsia-600 to-purple-500", tags: ["Care", "Education", "Workforce"] }
      ];

      const COUNTRIES = [
        {
          id: "israel",
          name: "×™×©×¨××œ",
          churnPct: 38,
          skillDisruptionPct: 88,
          drivers: ["×”×¨×—×‘×ª ×’×™×©×” ×“×™×’×™×˜×œ×™×ª", "×¢×œ×™×™×ª ×™×•×§×¨ ××—×™×”", "×”××¦×ª ××•×˜×•××¦×™×”"],
          risingSkills: ["×—×•×¡×Ÿ ×•×’××™×©×•×ª", "×—×©×™×‘×” ××¢×¨×›×ª×™×ª", "AI ×•×‘×™×’ ×“××˜×”", "×¡×™×™×‘×¨ ×•×¨×©×ª×•×ª"],
          strategies: ["×’×™×•×¡ ×›×™×©×•×¨×™× ×—×“×©×™×", "×”×›×©×¨×•×ª ×•×©×“×¨×•×’ ××™×•×× ×•×™×•×ª", "××•×˜×•××¦×™×”"]
        },
        {
          id: "usa",
          name: "××¨×”×´×‘",
          churnPct: null,
          skillDisruptionPct: null,
          drivers: ["××’××•×ª ×˜×›× ×•×œ×•×’×™×•×ª", "××¢×‘×¨ ×™×¨×•×§", "×©×™×‘×•×©×™ ×©×¨×©×¨×ª ××¡×¤×§×”"],
          risingSkills: ["AI ×•×‘×™×’ ×“××˜×”", "× ×™×”×•×œ ×¤×¨×•×™×§×˜×™×", "×—×©×™×‘×” ×× ×œ×™×˜×™×ª"],
          strategies: ["×”×›×©×¨×•×ª", "××•×˜×•××¦×™×”", "Skill-first hiring"]
        },
        {
          id: "canada",
          name: "×§× ×“×”",
          churnPct: null,
          skillDisruptionPct: null,
          drivers: ["×“×™×’×™×˜×œ×™×–×¦×™×”", "×¡×™×™×‘×¨", "×¡×™×›×•× ×™ ×©×¨×©×¨×ª ××¡×¤×§×”"],
          risingSkills: ["AI ×•×‘×™×’ ×“××˜×”", "×¡×™×™×‘×¨ ×•×¨×©×ª×•×ª", "×—×©×™×‘×” ××¢×¨×›×ª×™×ª"],
          strategies: ["×”×›×©×¨×•×ª", "×’×™×•×¡ ×›×™×©×•×¨×™× ×—×“×©×™×", "×©×™×¤×•×¨ ××¡×œ×•×œ×™ ×”×ª×§×“××•×ª"]
        }
      ];

      const SKILLS = [
        { id: "ai", name: "AI ×•×‘×™×’ ×“××˜×”", icon: "ğŸ§ ", brief: "××•×¨×™×™× ×•×ª AI, × ×ª×•× ×™×, ××™××•×ª, ××•×˜×•××¦×™×” ×—×›××”." },
        { id: "res", name: "×—×•×¡×Ÿ ×•×’××™×©×•×ª", icon: "ğŸ§©", brief: "×œ×”×ª××•×©×© ××”×¨, ×œ×©× ×•×ª ×›×™×•×•×Ÿ, ×•×œ×”××©×™×š ×œ×¢×‘×•×“ ×˜×•×‘." },
        { id: "sys", name: "×—×©×™×‘×” ××¢×¨×›×ª×™×ª", icon: "ğŸ•¸ï¸", brief: "××™×¤×•×™ ×ª×”×œ×™×›×™×, ×§×©×¨×™× ×‘×™×Ÿ ×—×œ×§×™×, ×”×—×œ×˜×•×ª ×¢× ×”×©×œ×›×•×ª." },
        { id: "cy", name: "×¡×™×™×‘×¨ ×•×¨×©×ª×•×ª", icon: "ğŸ›¡ï¸", brief: "×”×™×’×™×™× ×ª ××‘×˜×—×”, ××•×“×¢×•×ª ×œ×¡×™×›×•× ×™×, ×¤×¨×§×˜×™×§×•×ª ×‘×¡×™×¡." },
        { id: "cur", name: "×¡×§×¨× ×•×ª ×•×œ××™×“×”", icon: "ğŸ“š", brief: "×©×’×¨×” ×©××™×™×¦×¨×ª ×œ××™×“×” ×××™×ª×™×ª, ×•×œ× â€˜×¢×•×“ ×˜××‘×™×â€™." }
      ];

      /* =========================
         1) 3D BACKGROUND (Three.js)
         ========================= */
      function useThreeBackground() {
        const reduceMotion = useMemo(() => {
          const mq = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)");
          return mq && mq.matches;
        }, []);

        useEffect(() => {
          const container = document.getElementById("bg3d");
          if (!container) return;

          const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
          renderer.setPixelRatio(Math.min(window.devicePixelRatio || 1, 2));
          renderer.setSize(window.innerWidth, window.innerHeight);
          container.appendChild(renderer.domElement);

          const scene = new THREE.Scene();
          const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100);
          camera.position.set(0, 0, 6.2);

          // Lights
          scene.add(new THREE.AmbientLight(0xffffff, 0.65));
          const key = new THREE.DirectionalLight(0xffffff, 0.9);
          key.position.set(3, 2, 4);
          scene.add(key);

          const rim = new THREE.DirectionalLight(0x8ab4ff, 0.55);
          rim.position.set(-4, -2, 3);
          scene.add(rim);

          // Globe (wire + points)
          const globeGroup = new THREE.Group();
          scene.add(globeGroup);

          const sphereGeo = new THREE.IcosahedronGeometry(1.55, 2);
          const wireMat = new THREE.MeshStandardMaterial({
            color: 0x111827,
            metalness: 0.2,
            roughness: 0.7,
            transparent: true,
            opacity: 0.10
          });
          const sphere = new THREE.Mesh(sphereGeo, wireMat);
          globeGroup.add(sphere);

          const edges = new THREE.EdgesGeometry(sphereGeo);
          const lineMat = new THREE.LineBasicMaterial({ color: 0x111827, transparent: true, opacity: 0.16 });
          const wire = new THREE.LineSegments(edges, lineMat);
          globeGroup.add(wire);

          // Points on sphere surface
          const pointsCount = 750;
          const pts = new Float32Array(pointsCount * 3);
          for (let i = 0; i < pointsCount; i++) {
            const u = Math.random();
            const v = Math.random();
            const theta = 2 * Math.PI * u;
            const phi = Math.acos(2 * v - 1);
            const r = 1.65 + (Math.random() * 0.05);
            const x = r * Math.sin(phi) * Math.cos(theta);
            const y = r * Math.cos(phi);
            const z = r * Math.sin(phi) * Math.sin(theta);
            pts[i * 3 + 0] = x;
            pts[i * 3 + 1] = y;
            pts[i * 3 + 2] = z;
          }
          const ptsGeo = new THREE.BufferGeometry();
          ptsGeo.setAttribute("position", new THREE.BufferAttribute(pts, 3));
          const ptsMat = new THREE.PointsMaterial({
            color: 0x3b82f6,
            size: 0.018,
            transparent: true,
            opacity: 0.55
          });
          const points = new THREE.Points(ptsGeo, ptsMat);
          globeGroup.add(points);

          // Floating rings (subtle)
          const ringGeo = new THREE.TorusGeometry(2.3, 0.015, 10, 220);
          const ringMat = new THREE.MeshStandardMaterial({
            color: 0x10b981,
            transparent: true,
            opacity: 0.16,
            roughness: 0.6,
            metalness: 0.15
          });
          const ring1 = new THREE.Mesh(ringGeo, ringMat);
          ring1.rotation.x = Math.PI / 2.6;
          ring1.rotation.y = Math.PI / 7;
          globeGroup.add(ring1);

          const ring2 = new THREE.Mesh(ringGeo, ringMat.clone());
          ring2.material.color = new THREE.Color(0xf59e0b);
          ring2.material.opacity = 0.12;
          ring2.rotation.x = Math.PI / 2.1;
          ring2.rotation.y = -Math.PI / 10;
          globeGroup.add(ring2);

          // Position globe lower-left a bit
          globeGroup.position.set(-1.7, -0.45, 0);

          let raf = 0;
          let t0 = performance.now();

          function animate(now) {
            const dt = (now - t0) / 1000;
            t0 = now;

            if (!reduceMotion) {
              globeGroup.rotation.y += dt * 0.12;
              globeGroup.rotation.x += dt * 0.03;
              ring1.rotation.z += dt * 0.18;
              ring2.rotation.z -= dt * 0.14;
            }

            renderer.render(scene, camera);
            raf = requestAnimationFrame(animate);
          }
          raf = requestAnimationFrame(animate);

          function onResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
          }
          window.addEventListener("resize", onResize);

          return () => {
            cancelAnimationFrame(raf);
            window.removeEventListener("resize", onResize);
            renderer.dispose();
            container.innerHTML = "";
          };
        }, []);
      }

      /* =========================
         2) UI Bits
         ========================= */
      function cn(...classes) {
        return classes.filter(Boolean).join(" ");
      }

      function Pill({ children, tone = "neutral" }) {
        const map = {
          neutral: "bg-gray-100 text-gray-800 border-gray-200",
          good: "bg-green-100 text-green-800 border-green-200",
          warn: "bg-yellow-100 text-yellow-800 border-yellow-200",
          bad: "bg-red-100 text-red-800 border-red-200",
          info: "bg-blue-100 text-blue-800 border-blue-200"
        };
        return <span class={cn("inline-flex items-center px-2.5 py-1 rounded-full text-xs border", map[tone] || map.neutral)}>{children}</span>;
      }

      function SectionTitle({ title, subtitle }) {
        return (
          <div class="mb-4">
            <div class="text-2xl md:text-3xl font-extrabold tracking-tight">{title}</div>
            {subtitle && <div class="mt-1 text-sm text-gray-600 max-w-2xl">{subtitle}</div>}
          </div>
        );
      }

      function GlassCard({ title, right, children, className }) {
        return (
          <div class={cn("glass rounded-2xl overflow-hidden", className)}>
            <div class="px-5 py-4 border-b" style={{ borderColor: "rgba(0,0,0,0.06)" }}>
              <div class="flex items-start justify-between gap-3">
                <div class="font-bold">{title}</div>
                {right}
              </div>
            </div>
            <div class="px-5 py-4">{children}</div>
          </div>
        );
      }

      function ProgressBar({ value }) {
        const v = Math.max(0, Math.min(100, value));
        return (
          <div class="w-full bg-gray-200 rounded-full h-2 overflow-hidden">
            <div class="h-2 rounded-full bg-gray-900" style={{ width: v + "%" }}></div>
          </div>
        );
      }

      function Modal({ open, onClose, title, children }) {
        if (!open) return null;
        return (
          <div class="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div class="absolute inset-0 bg-black opacity-40" onClick={onClose}></div>
            <div class="relative w-full max-w-2xl glass rounded-2xl overflow-hidden">
              <div class="px-5 py-4 border-b flex items-center justify-between gap-3" style={{ borderColor: "rgba(0,0,0,0.06)" }}>
                <div class="font-bold">{title}</div>
                <button class="px-3 py-1.5 rounded-lg border hover:bg-white" onClick={onClose}>×¡×’×•×¨</button>
              </div>
              <div class="px-5 py-4">{children}</div>
            </div>
          </div>
        );
      }

      /* =========================
         3) Screens
         ========================= */
      function Hero({ onStart }) {
        return (
          <div class="max-w-6xl mx-auto px-4 pt-8 pb-6 fade-in">
            <div class="glass rounded-3xl p-6 md:p-8">
              <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
                <div class="max-w-2xl">
                  <div class="inline-flex items-center gap-2 mb-3">
                    <Pill tone="info">WEF 2025</Pill>
                    <Pill tone="neutral">2030 Outlook</Pill>
                    <Pill tone="good">Skill-first</Pill>
                  </div>

                  <div class="text-3xl md:text-4xl font-extrabold leading-tight tracking-tight">
                    ×œ×”×‘×™×Ÿ ××” ××–×™×– ××ª ×©×•×§ ×”×¢×‘×•×“×”, ×•××– ×œ×”×•×¦×™× ××–×” ×ª×•×›× ×™×ª ×××™×ª×™×ª ×œ××—×¨ ×‘×‘×•×§×¨.
                  </div>
                  <div class="mt-3 text-gray-700">
                    × ×˜×• ×¢×“ 2030, {GLOBAL_HERO.netGrowthM} ××™×œ×™×•×Ÿ ××©×¨×•×ª. ×”×¨×‘×” ×ª× ×•×¢×”, ×œ× ×¡×•×£ ×”×¢×•×œ×.
                    ×”×›×™×£, ×”×•× ×œ×‘× ×•×ª ×™×ª×¨×•×Ÿ ×‘××§×•× ×œ×¨×“×•×£ ××—×¨×™ ×¤×—×“.
                  </div>

                  <div class="mt-5 flex flex-col sm:flex-row gap-3">
                    <button
                      class="no-print px-5 py-3 rounded-2xl bg-gray-900 text-white hover:bg-gray-800"
                      onClick={onStart}
                    >
                      ×‘×•× × ×‘× ×” ××¡×œ×•×œ ××™×©×™
                    </button>
                    <button
                      class="no-print px-5 py-3 rounded-2xl border border-gray-200 bg-white hover:bg-gray-50"
                      onClick={() => window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" })}
                    >
                      ×ª×¨××” ×œ×™ ×§×•×“× ××ª ×”××’××•×ª
                    </button>
                  </div>
                </div>

                <div class="grid grid-cols-2 gap-3 w-full md:w-80">
                  {[
                    { label: "× ×•×¦×¨×™×", value: `${GLOBAL_HERO.jobsCreatedM}M` },
                    { label: "× ×“×—×§×™×", value: `${GLOBAL_HERO.jobsDisplacedM}M` },
                    { label: "× ×˜×•", value: `${GLOBAL_HERO.netGrowthM}M` },
                    { label: "Churn", value: `${GLOBAL_HERO.churnPct}%` }
                  ].map((k, i) => (
                    <div key={i} class="glass2 rounded-2xl p-4 lift">
                      <div class="text-xs text-gray-600">{k.label}</div>
                      <div class="text-2xl font-extrabold">{k.value}</div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        );
      }

      function ExploreScreen() {
        return (
          <div class="max-w-6xl mx-auto px-4 py-6 fade-in">
            <SectionTitle
              title="××¤×ª ×”×¢×ª×™×“"
              subtitle="5 ×× ×•×¢×™ ×©×™× ×•×™, ×›×œ ××—×“ ×¢× ××©××¢×•×ª ×¤×¨×§×˜×™×ª. ×”×›×¨×˜×™×¡×™× ××¨×’×™×©×™× ×›××• ××•×¦×¨, ×œ× ×›××• PDF ×¢× × ×©××” ×¢×™×™×¤×”."
            />
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              {MACROTRENDS.map(t => (
                <div key={t.id} class="glass rounded-3xl p-5 lift">
                  <div class={cn("h-2 rounded-full bg-gradient-to-l", t.hue)}></div>
                  <div class="mt-4 flex items-start justify-between gap-3">
                    <div class="text-xl font-extrabold">{t.title}</div>
                    <Pill tone="info">××’××”</Pill>
                  </div>
                  <div class="mt-2 text-gray-700">{t.blurb}</div>
                  <div class="mt-4 flex flex-wrap gap-2">
                    {t.tags.map(tag => <Pill key={tag} tone="neutral">{tag}</Pill>)}
                  </div>
                </div>
              ))}
            </div>
          </div>
        );
      }

      function CountryScreen() {
        const [countryId, setCountryId] = useState("israel");
        const c = useMemo(() => COUNTRIES.find(x => x.id === countryId), [countryId]);

        return (
          <div class="max-w-6xl mx-auto px-4 py-6 fade-in">
            <SectionTitle
              title="×œ×¤×™ ××“×™× ×”"
              subtitle="×‘×—×™×¨×ª ××“×™× ×” × ×•×ª× ×ª ×”×§×©×¨, ××” ×× ×™×¢ ××ª ×”×©×•×§ ×©×, ××™×œ×• ××™×•×× ×•×™×•×ª ×¢×•×œ×•×ª, ×•××™×š ××¢×¡×™×§×™× ××’×™×‘×™×."
            />

            <GlassCard
              title="×“×©×‘×•×¨×“ ××“×™× ×”"
              right={
                <select class="border rounded-xl px-3 py-2 bg-white" value={countryId} onChange={(e) => setCountryId(e.target.value)}>
                  {COUNTRIES.map(x => <option key={x.id} value={x.id}>{x.name}</option>)}
                </select>
              }
            >
              <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <div class="glass2 rounded-2xl p-4">
                  <div class="text-xs text-gray-600">Churn (×× ×–××™×Ÿ)</div>
                  <div class="text-2xl font-extrabold mt-1">{c.churnPct == null ? "×œ× ×–××™×Ÿ" : c.churnPct + "%"}</div>
                  <div class="mt-2"><ProgressBar value={c.churnPct == null ? 0 : c.churnPct} /></div>
                </div>
                <div class="glass2 rounded-2xl p-4">
                  <div class="text-xs text-gray-600">Skill disruption (×× ×–××™×Ÿ)</div>
                  <div class="text-2xl font-extrabold mt-1">{c.skillDisruptionPct == null ? "×œ× ×–××™×Ÿ" : c.skillDisruptionPct + "%"}</div>
                  <div class="mt-2"><ProgressBar value={c.skillDisruptionPct == null ? 0 : c.skillDisruptionPct} /></div>
                </div>
                <div class="glass2 rounded-2xl p-4">
                  <div class="text-xs text-gray-600">×˜×•×Ÿ ×›×œ×œ×™</div>
                  <div class="text-2xl font-extrabold mt-1">
                    {c.id === "israel" ? "×“×™× ××™" : "×™×¦×™×‘ ×™×—×¡×™×ª"}
                  </div>
                  <div class="mt-2 text-sm text-gray-600">
                    ×–×” ×“××• MVP, ×”×¨×—×‘×” ×œ 55 ××“×™× ×•×ª ×”×™× ×‘×¢×™×§×¨ ×“××˜×”.
                  </div>
                </div>
              </div>

              <div class="mt-5 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="glass2 rounded-2xl p-4">
                  <div class="font-bold">××” ××–×™×– ××•×ª× ×• ×‘××“×™× ×” ×”×–×•</div>
                  <ul class="mt-3 list-disc pr-5 text-sm text-gray-700 space-y-1">
                    {c.drivers.map((d, i) => <li key={i}>{d}</li>)}
                  </ul>
                </div>

                <div class="glass2 rounded-2xl p-4">
                  <div class="font-bold">××” ××ª×—×–×§, ×•××” ××¢×¡×™×§×™× ×¢×•×©×™×</div>
                  <div class="mt-3 flex flex-wrap gap-2">
                    {c.risingSkills.map(s => <Pill key={s} tone="good">{s}</Pill>)}
                  </div>
                  <div class="mt-4 text-xs text-gray-600">××¡×˜×¨×˜×’×™×•×ª</div>
                  <div class="mt-2 flex flex-wrap gap-2">
                    {c.strategies.map(s => <Pill key={s} tone="neutral">{s}</Pill>)}
                  </div>
                </div>
              </div>
            </GlassCard>
          </div>
        );
      }

      function SkillsScreen() {
        const [q, setQ] = useState("");
        const filtered = useMemo(() => {
          const s = q.trim().toLowerCase();
          if (!s) return SKILLS;
          return SKILLS.filter(x => x.name.toLowerCase().includes(s) || x.brief.toLowerCase().includes(s));
        }, [q]);

        return (
          <div class="max-w-6xl mx-auto px-4 py-6 fade-in">
            <SectionTitle
              title="××™×•×× ×•×™×•×ª"
              subtitle="×”×—×œ×§ ×©×‘×• ×–×” ×”×•×¤×š ×œ×ª×›×œ×¡. ×›×œ ××™×•×× ×•×ª ×›××Ÿ ×”×™× â€˜×™×—×™×“×ª ××™××•×Ÿâ€™ ×©××¤×©×¨ ×œ×”×ª×—×™×œ ××—×¨ ×‘×‘×•×§×¨."
            />

            <div class="glass rounded-3xl p-5">
              <div class="flex flex-col md:flex-row gap-3 md:items-center md:justify-between">
                <input
                  class="border rounded-2xl px-4 py-3 w-full md:w-96"
                  placeholder="×—×¤×© ××™×•×× ×•×ª"
                  value={q}
                  onChange={(e) => setQ(e.target.value)}
                />
                <div class="text-sm text-gray-600">
                  ×˜×™×¤: ×ª×‘×—×¨ 2-3 ××™×•×× ×•×™×•×ª ×¢×œ, ×•××– ×¤×¨×•×™×§×˜ ×§×˜×Ÿ ×©××•×›×™×— ××•×ª×Ÿ.
                </div>
              </div>

              <div class="mt-5 grid grid-cols-1 md:grid-cols-2 gap-4">
                {filtered.map(s => (
                  <div key={s.id} class="glass2 rounded-3xl p-5 lift">
                    <div class="flex items-start justify-between gap-3">
                      <div class="flex items-center gap-3">
                        <div class="w-12 h-12 rounded-2xl bg-white border flex items-center justify-center text-2xl">{s.icon}</div>
                        <div>
                          <div class="text-lg font-extrabold">{s.name}</div>
                          <div class="text-sm text-gray-600 mt-1">{s.brief}</div>
                        </div>
                      </div>
                      <Pill tone="info">2030</Pill>
                    </div>

                    <div class="mt-4 grid grid-cols-2 gap-3">
                      <div class="border rounded-2xl p-3 bg-white">
                        <div class="text-xs text-gray-600">××¡×œ×•×œ 4 ×©×‘×•×¢×•×ª</div>
                        <div class="text-sm font-bold mt-1">××™×§×¨×•-×”×¨×’×œ ×™×•××™</div>
                        <div class="text-xs text-gray-500 mt-1">15 ×“×§ ×‘×™×•×, ×‘×œ×™ ×¡×‘×œ</div>
                      </div>
                      <div class="border rounded-2xl p-3 bg-white">
                        <div class="text-xs text-gray-600">××¡×œ×•×œ 8 ×©×‘×•×¢×•×ª</div>
                        <div class="text-sm font-bold mt-1">×¤×¨×•×™×§×˜ ×œ×ª×™×§ ×¢×‘×•×“×•×ª</div>
                        <div class="text-xs text-gray-500 mt-1">×ª×•×¦×¨ ××—×“ ×©××ª×” ×’××” ×‘×•</div>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        );
      }

      function PlanScreen() {
        const [countryId, setCountryId] = useState("israel");
        const [hours, setHours] = useState(4);
        const [orientation, setOrientation] = useState("×˜×›× ×•×œ×•×’×™");
        const [ratings, setRatings] = useState({ ai: 2, res: 3, sys: 2, cy: 2, cur: 3 });
        const [result, setResult] = useState(null);
        const [whyOpen, setWhyOpen] = useState(false);

        const country = useMemo(() => COUNTRIES.find(x => x.id === countryId), [countryId]);

        const completion = useMemo(() => {
          // just UX sugar: estimate filledness
          let score = 0;
          score += countryId ? 20 : 0;
          score += hours ? 20 : 0;
          score += orientation ? 20 : 0;
          score += Object.values(ratings).every(v => v >= 1) ? 40 : 0;
          return score;
        }, [countryId, hours, orientation, ratings]);

        function makePlan() {
          // Transparent MVP scoring
          const techExposureBase = 60;
          const exposure = Math.max(0, Math.min(100, techExposureBase + (orientation === "×˜×›× ×•×œ×•×’×™" ? 10 : 0)));
          const gapAvg = (Object.values(ratings).reduce((a, b) => a + (6 - b), 0) / 5); // 1..5
          const gapScore = Math.max(0, Math.min(100, Math.round((gapAvg / 5) * 100)));

          const risk = Math.max(0, Math.min(100, Math.round(0.55 * gapScore + 0.45 * exposure)));

          const top = Object.entries(ratings)
            .map(([k, v]) => ({ k, v, gap: 6 - v }))
            .sort((a, b) => b.gap - a.gap)
            .slice(0, 3)
            .map(x => x.k);

          const topSkills = top.map(id => SKILLS.find(s => s.id === id)?.name || id);

          const projects = [
            {
              title: "××™× ×™-×¤×¨×•×™×§×˜ â€˜×ª×”×œ×™×š ××—×“ ×—×›× ×™×•×ª×¨â€™",
              desc: "×‘×—×¨ ×¤×¢×•×œ×” ×©××ª×” ×¢×•×©×” ×›×œ ×©×‘×•×¢, ×•×”×¤×•×š ××•×ª×” ×œ×™×•×ª×¨ ××•×˜×•××˜×™×ª ××• ×™×•×ª×¨ ××“×™×“×”. ×ª×™×¢×•×“ ×œ×¤× ×™ ×•××—×¨×™.",
              time: hours >= 5 ? "3-6 ×©×¢×•×ª" : "2-4 ×©×¢×•×ª"
            },
            {
              title: "×ª×™×§ ×¢×‘×•×“×•×ª ×§×˜×Ÿ",
              desc: "×“×£ ××—×“ ×©××¨××”: ×‘×¢×™×”, ×¤×ª×¨×•×Ÿ, ×ª×•×¦××”, ×•××” ×œ××“×ª. ×ª×•×¦×¨ ×¤×©×•×˜ ×× ×¦×— ×‘×œ×‘×•×œ.",
              time: "2-3 ×©×¢×•×ª"
            }
          ];

          setResult({
            exposure, gapScore, risk,
            topSkills, projects,
            why: [
              "×”×—×©×™×¤×” ×œ×˜×›× ×•×œ×•×’×™×” ×”×™× ×”×§×©×¨ ×¨×—×‘ ×‘×©×•×§, ×œ×›×Ÿ ×ª××™×“ × ×§×•×“×ª ×¤×ª×™×—×” ×’×‘×•×”×”.",
              "×¤×¢×¨×™ ××™×•×× ×•×™×•×ª × ××“×“×™× ×¤×” ×œ×¤×™ ×“×™×¨×•×’ ×¢×¦××™, ×©×§×•×£ ×•×œ× ×§×¡×•×.",
              "×”×ª×•×›× ×™×ª ×‘× ×•×™×” ×¡×‘×™×‘ ×–××Ÿ ×”×©×§×¢×” ×©×‘×•×¢×™, ×›×“×™ ×œ× ×œ×”×‘×˜×™×— ×©×˜×•×™×•×ª."
            ]
          });
        }

        function label(score) {
          if (score >= 70) return { t: "×’×‘×•×”", cls: "bg-red-100 text-red-800 border-red-200" };
          if (score >= 40) return { t: "×‘×™× ×•× ×™", cls: "bg-yellow-100 text-yellow-800 border-yellow-200" };
          return { t: "× ××•×š", cls: "bg-green-100 text-green-800 border-green-200" };
        }

        return (
          <div class="max-w-6xl mx-auto px-4 py-6 fade-in print-area">
            <SectionTitle
              title="×”××¡×œ×•×œ ×©×œ×™"
              subtitle="×©××œ×•×Ÿ ×§×¦×¨, ×”××œ×¦×•×ª ×©×§×•×¤×•×ª, ×•×ª×•×›× ×™×ª ×©××¤×©×¨ ×œ×”×ª×—×™×œ ××™×ª×” ×›×‘×¨ ×”×©×‘×•×¢."
            />

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
              <div class="lg:col-span-2">
                <GlassCard
                  title="×”×©××œ×•×Ÿ"
                  right={
                    <div class="flex items-center gap-2">
                      <Pill tone="neutral">{completion}% ××•×›× ×•×ª</Pill>
                      <button class="no-print px-4 py-2 rounded-2xl bg-gray-900 text-white hover:bg-gray-800" onClick={makePlan}>
                        ×”×¤×§ ×ª×•×›× ×™×ª
                      </button>
                      <button class="no-print px-4 py-2 rounded-2xl border bg-white hover:bg-gray-50" onClick={() => window.print()} disabled={!result}>
                        ×”×“×¤×¡×” ×œ PDF
                      </button>
                    </div>
                  }
                >
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                    <div>
                      <div class="text-xs text-gray-600 mb-1">××“×™× ×”</div>
                      <select class="border rounded-2xl px-4 py-3 bg-white w-full" value={countryId} onChange={(e) => setCountryId(e.target.value)}>
                        {COUNTRIES.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}
                      </select>
                    </div>
                    <div>
                      <div class="text-xs text-gray-600 mb-1">×©×¢×•×ª ×‘×©×‘×•×¢</div>
                      <input type="number" min="1" max="20" class="border rounded-2xl px-4 py-3 bg-white w-full" value={hours} onChange={(e) => setHours(Number(e.target.value))} />
                    </div>
                    <div>
                      <div class="text-xs text-gray-600 mb-1">× ×˜×™×™×”</div>
                      <select class="border rounded-2xl px-4 py-3 bg-white w-full" value={orientation} onChange={(e) => setOrientation(e.target.value)}>
                        <option>×˜×›× ×•×œ×•×’×™</option>
                        <option>×× ×©×™×</option>
                        <option>×ª×¤×¢×•×œ</option>
                        <option>×™×¦×™×¨×ª×™</option>
                      </select>
                    </div>
                  </div>

                  <div class="mt-5 glass2 rounded-3xl p-5">
                    <div class="font-extrabold">×“×™×¨×•×’ ×¢×¦××™ ××”×™×¨</div>
                    <div class="text-sm text-gray-600 mt-1">×–×” ×œ× ××‘×—×Ÿ, ×–×” ×¨×§ ×“×¨×š ×œ×—×©×‘ ×¤×¢×¨×™× ×‘×¦×•×¨×” ×©×œ× ××—×¨×˜×˜×ª.</div>

                    <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-3">
                      {SKILLS.map(s => (
                        <div key={s.id} class="border rounded-3xl p-4 bg-white lift">
                          <div class="flex items-start justify-between gap-3">
                            <div class="flex items-center gap-3">
                              <div class="w-11 h-11 rounded-2xl border flex items-center justify-center text-2xl">{s.icon}</div>
                              <div>
                                <div class="font-bold">{s.name}</div>
                                <div class="text-xs text-gray-500 mt-1">{s.brief}</div>
                              </div>
                            </div>
                            <Pill tone="info">{ratings[s.id]}/5</Pill>
                          </div>
                          <input
                            type="range"
                            min="1"
                            max="5"
                            value={ratings[s.id]}
                            class="w-full mt-4"
                            onChange={(e) => setRatings(prev => ({ ...prev, [s.id]: Number(e.target.value) }))}
                          />
                        </div>
                      ))}
                    </div>
                  </div>
                </GlassCard>
              </div>

              <div>
                <GlassCard title="×”×§×©×¨ ××“×™× ×ª×™" right={<Pill tone="info">{country.name}</Pill>}>
                  <div class="space-y-3">
                    <div class="glass2 rounded-2xl p-4">
                      <div class="text-xs text-gray-600">Drivers</div>
                      <ul class="mt-2 list-disc pr-5 text-sm text-gray-700 space-y-1">
                        {country.drivers.slice(0, 3).map((d, i) => <li key={i}>{d}</li>)}
                      </ul>
                    </div>
                    <div class="glass2 rounded-2xl p-4">
                      <div class="text-xs text-gray-600">Skills rising</div>
                      <div class="mt-2 flex flex-wrap gap-2">
                        {country.risingSkills.slice(0, 4).map(s => <Pill key={s} tone="good">{s}</Pill>)}
                      </div>
                    </div>
                    <div class="glass2 rounded-2xl p-4">
                      <div class="text-xs text-gray-600">Strategies</div>
                      <div class="mt-2 flex flex-wrap gap-2">
                        {country.strategies.slice(0, 4).map(s => <Pill key={s} tone="neutral">{s}</Pill>)}
                      </div>
                    </div>
                  </div>
                </GlassCard>

                {result && (
                  <div class="mt-4 glass rounded-3xl p-5 fade-in">
                    <div class="flex items-start justify-between gap-3">
                      <div>
                        <div class="font-extrabold text-lg">×”×“×•×— ×©×œ×š</div>
                        <div class="text-sm text-gray-600 mt-1">×¡×™×›×•×Ÿ, ×¤×¢×¨×™×, ×•××” ×¢×•×©×™× ×”×©×‘×•×¢.</div>
                      </div>
                      <button class="no-print px-3 py-2 rounded-2xl border bg-white hover:bg-gray-50" onClick={() => setWhyOpen(true)}>
                        ×œ××” ×–×”?
                      </button>
                    </div>

                    <div class="mt-4 space-y-3">
                      {[
                        { name: "×¡×™×›×•×Ÿ ×œ×©×—×™×§×”", v: result.risk },
                        { name: "×—×©×™×¤×” ×˜×›× ×•×œ×•×’×™×ª", v: result.exposure },
                        { name: "×¤×¢×¨ ××™×•×× ×•×™×•×ª", v: result.gapScore }
                      ].map((k, i) => {
                        const b = label(k.v);
                        return (
                          <div key={i} class="glass2 rounded-2xl p-4">
                            <div class="flex items-center justify-between gap-3">
                              <div class="font-bold">{k.name}</div>
                              <span class={cn("px-2.5 py-1 rounded-full text-xs border", b.cls)}>{b.t}</span>
                            </div>
                            <div class="mt-2"><ProgressBar value={k.v} /></div>
                            <div class="mt-2 text-xs text-gray-600">{k.v}/100</div>
                          </div>
                        );
                      })}
                    </div>

                    <div class="mt-4 glass2 rounded-2xl p-4">
                      <div class="font-bold">3 ××™×•×× ×•×™×•×ª ×—×•×‘×” ×œ 6 ×—×•×“×©×™×</div>
                      <div class="mt-2 flex flex-wrap gap-2">
                        {result.topSkills.map(s => <Pill key={s} tone="good">{s}</Pill>)}
                      </div>
                    </div>

                    <div class="mt-3 glass2 rounded-2xl p-4">
                      <div class="font-bold">2 ×¤×¨×•×™×§×˜×™× ×œ×ª×™×§ ×¢×‘×•×“×•×ª</div>
                      <div class="mt-2 space-y-2">
                        {result.projects.map((p, i) => (
                          <div key={i} class="border rounded-2xl p-3 bg-white">
                            <div class="flex items-center justify-between gap-3">
                              <div class="font-bold">{p.title}</div>
                              <Pill tone="info">{p.time}</Pill>
                            </div>
                            <div class="text-sm text-gray-700 mt-1">{p.desc}</div>
                          </div>
                        ))}
                      </div>
                    </div>

                    <Modal open={whyOpen} onClose={() => setWhyOpen(false)} title="×œ××” ×–×”? (×©×§×™×¤×•×ª)">
                      <div class="space-y-2">
                        {result.why.map((x, i) => (
                          <div key={i} class="border rounded-2xl p-3 bg-white">
                            <div class="text-sm text-gray-800">{x}</div>
                          </div>
                        ))}
                      </div>
                    </Modal>
                  </div>
                )}
              </div>
            </div>
          </div>
        );
      }

      /* =========================
         4) App shell
         ========================= */
      function TopNav({ route, setRoute }) {
        const items = [
          { id: "explore", label: "××¤×ª ×”×¢×ª×™×“" },
          { id: "country", label: "×œ×¤×™ ××“×™× ×”" },
          { id: "skills", label: "××™×•×× ×•×™×•×ª" },
          { id: "plan", label: "×”××¡×œ×•×œ ×©×œ×™" }
        ];

        return (
          <div class="no-print sticky top-0 z-30">
            <div class="max-w-6xl mx-auto px-4 pt-3">
              <div class="glass rounded-2xl px-3 py-2 flex items-center justify-between gap-3">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 rounded-2xl bg-gray-900 text-white flex items-center justify-center font-extrabold">FJ</div>
                  <div>
                    <div class="font-extrabold leading-tight">Future of Jobs</div>
                    <div class="text-xs text-gray-600">3D UX MVP</div>
                  </div>
                </div>

                <div class="hidden md:flex items-center gap-2">
                  {items.map(it => (
                    <button
                      key={it.id}
                      onClick={() => setRoute(it.id)}
                      class={cn(
                        "px-3 py-2 rounded-2xl text-sm border transition",
                        route === it.id ? "bg-gray-900 text-white border-gray-900" : "bg-white hover:bg-gray-50 border-gray-200"
                      )}
                    >
                      {it.label}
                    </button>
                  ))}
                </div>

                <div class="md:hidden">
                  <select class="border rounded-2xl px-3 py-2 bg-white" value={route} onChange={(e) => setRoute(e.target.value)}>
                    {items.map(it => <option key={it.id} value={it.id}>{it.label}</option>)}
                  </select>
                </div>
              </div>
            </div>
          </div>
        );
      }

      function App() {
        useThreeBackground();
        const [route, setRoute] = useState("explore");

        return (
          <div>
            <TopNav route={route} setRoute={setRoute} />
            <Hero onStart={() => setRoute("plan")} />

            {route === "explore" && <ExploreScreen />}
            {route === "country" && <CountryScreen />}
            {route === "skills" && <SkillsScreen />}
            {route === "plan" && <PlanScreen />}

            <div class="no-print max-w-6xl mx-auto px-4 pb-10">
              <div class="text-xs text-gray-600 mt-6">
                ×˜×™×¤ ××•×¦×¨: ×” 3D ×›××Ÿ ×”×•× â€œ××•×•×™×¨×”â€. ××œ ×ª×¢××™×¡. ×›×©××›× ×™×¡×™× ××ª ×›×œ 55 ×”××“×™× ×•×ª, ×”×¢×¨×š ×”×××™×ª×™ ×”×•× ×”×—×™×¤×•×©, ×”×”×©×•×•××”, ×•×”×¡×‘×¨ ×©×§×•×£ ×œ×›×œ ×”××œ×¦×”.
              </div>
            </div>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
